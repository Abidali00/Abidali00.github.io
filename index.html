<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Tools Web</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f9f9f9; }
    main { display:grid; gap:20px; }
    section { background:#fff; border:1px solid #ccc; border-radius:8px; padding:15px; }
    h2 { margin-top:0; }
    input, select, button { margin:5px 0; padding:8px; }
    .result { margin-top:10px; font-weight:bold; }
  </style>
</head>
<body>
  <h1>üåç Daily Tools Web</h1>
  <main>

    <!-- Currency Converter -->
    <section>
      <h2>üí± Currency Converter</h2>
      <input type="number" id="cur_amount" placeholder="Amount" value="1">
      <div>
        <select id="cur_from"></select>
        <select id="cur_to"></select>
      </div>
      <button onclick="convertCurrency()">Convert</button>
      <button onclick="fetchRates()">Update rates</button>
      <div class="result" id="cur_result">Result will appear here</div>
    </section>

    <!-- Gold Price -->
    <section>
      <h2>üèÖ Gold Price</h2>
      <button onclick="getGoldPrice()">Get Gold Price (USD/oz)</button>
      <div class="result" id="gold_result"></div>
    </section>

    <!-- Prayer Times -->
    <section>
      <h2>üïå Prayer Times</h2>
      <input type="text" id="city" placeholder="Enter city (e.g. Riyadh)">
      <input type="text" id="country" placeholder="Enter country (e.g. Saudi Arabia)">
      <button onclick="getPrayerTimes()">Get Prayer Times</button>
      <div class="result" id="prayer_result"></div>
    </section>

    <!-- Weather -->
    <section>
      <h2>‚õÖ Weather</h2>
      <input type="text" id="weather_city" placeholder="Enter city (e.g. London)">
      <button onclick="getWeather()">Get Weather</button>
      <div class="result" id="weather_result"></div>
    </section>

  </main>

  <script>
    // --- Currency Converter ---
    let rates = { USD:1, EUR:0.95, SAR:3.75, PKR:278, INR:83, AED:3.67 };

    const curFrom = document.getElementById("cur_from");
    const curTo = document.getElementById("cur_to");

    function populateCurrencies(){
      Object.keys(rates).forEach(code=>{
        let opt1=document.createElement("option");
        opt1.value=code; opt1.textContent=code;
        let opt2=opt1.cloneNode(true);
        curFrom.appendChild(opt1);
        curTo.appendChild(opt2);
      });
      curFrom.value="USD"; curTo.value="PKR";
    }
    populateCurrencies();

    function convertCurrency(){
      let amt=document.getElementById("cur_amount").value;
      let from=curFrom.value, to=curTo.value;
      let result=(amt/rates[from])*rates[to];
      document.getElementById("cur_result").textContent=
        `${amt} ${from} = ${result.toFixed(2)} ${to}`;
    }

    async function fetchRates(){
      try {
        let res=await fetch("https://api.exchangerate.host/latest?base=USD");
        let data=await res.json();
        rates=data.rates;
        alert("Rates updated from API!");
      } catch(e){
        alert("Failed to fetch live rates, using sample data.");
      }
    }

    // --- Gold Price ---
    async function getGoldPrice(){
      try {
        let res=await fetch("https://api.metals.live/v1/spot");
        let data=await res.json();
        let gold=data.find(x=>x.hasOwnProperty("gold"));
        document.getElementById("gold_result").textContent=
          "Gold Price: $" + gold.gold + " per oz";
      } catch(e){
        document.getElementById("gold_result").textContent="Error fetching gold price.";
      }
    }

    // --- Prayer Times ---
    async function getPrayerTimes(){
      let city=document.getElementById("city").value;
      let country=document.getElementById("country").value;
      try {
        let res=await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${city}&country=${country}`);
        let data=await res.json();
        let timings=data.data.timings;
        document.getElementById("prayer_result").textContent=
          `Fajr: ${timings.Fajr}, Dhuhr: ${timings.Dhuhr}, Asr: ${timings.Asr}, Maghrib: ${timings.Maghrib}, Isha: ${timings.Isha}`;
      } catch(e){
        document.getElementById("prayer_result").textContent="Error fetching prayer times.";
      }
    }

    // --- Weather ---
    async function getWeather(){
      let city=document.getElementById("weather_city").value;
      try {
        // Free API (no key required)
        let res=await fetch(`https://wttr.in/${city}?format=j1`);
        let data=await res.json();
        let temp=data.current_condition[0].temp_C;
        let desc=data.current_condition[0].weatherDesc[0].value;
        document.getElementById("weather_result").textContent=
          `${city}: ${temp}¬∞C, ${desc}`;
      } catch(e){
        document.getElementById("weather_result").textContent="Error fetching weather.";
      }
    }
  </script>
</body>
</html>
